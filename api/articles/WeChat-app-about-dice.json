{"title":"WeChat-app-about-dice","slug":"WeChat-app-about-dice","date":"2017-06-02T14:24:32.000Z","updated":"2018-04-23T13:57:18.000Z","comments":true,"path":"api/articles/WeChat-app-about-dice.json","excerpt":null,"covers":["https://mini.tysb7.cn/images/diceqrcode.jpg","https://mini.tysb7.cn/images/dice.png"],"content":"<p>This is my first project.A WeChat-app about dice.</p>\n<p><img src=\"https://mini.tysb7.cn/images/diceqrcode.jpg\" alt></p>\n<blockquote>\n<p>The project has been shelves.<br>The current version number is V1.0.0<br>You can search for 天地五行八卦骰子 in the WeChat.<br>You can also scan this QR code.</p>\n</blockquote>\n<hr>\n<h2 id=\"CODE\"><a href=\"#CODE\" class=\"headerlink\" title=\"CODE\"></a>CODE</h2><h3 id=\"dice-wxml\"><a href=\"#dice-wxml\" class=\"headerlink\" title=\"dice.wxml\"></a>dice.wxml</h3><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">import</span> <span class=\"attr\">src</span>=<span class=\"string\">\"dice/dice-template.wxml\"</span> /&gt;</span><span class=\"tag\">&lt;<span class=\"name\">view</span> <span class=\"attr\">id</span>=<span class=\"string\">\"header\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">view</span> <span class=\"attr\">class</span>=<span class=\"string\">\"btn\"</span> <span class=\"attr\">catchtap</span>=<span class=\"string\">\"reduceDice\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">image</span> <span class=\"attr\">src</span>=<span class=\"string\">\"/images/btn-left.png\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">image</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">text</span> <span class=\"attr\">id</span>=<span class=\"string\">\"dice-count\"</span>&gt;</span>&#123;&#123;diceCount&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">text</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">view</span> <span class=\"attr\">class</span>=<span class=\"string\">\"btn\"</span> <span class=\"attr\">catchtap</span>=<span class=\"string\">\"addDice\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">image</span> <span class=\"attr\">src</span>=<span class=\"string\">\"/images/btn-right.png\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">image</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">view</span> <span class=\"attr\">id</span>=<span class=\"string\">\"dice-zone\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">block</span> <span class=\"attr\">wx:for</span>=<span class=\"string\">\"&#123;&#123;dicesData&#125;&#125;\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">template</span> <span class=\"attr\">is</span>=<span class=\"string\">\"dice-template\"</span> <span class=\"attr\">data</span>=<span class=\"string\">\"&#123;&#123;...item&#125;&#125;\"</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">block</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">view</span> <span class=\"attr\">id</span>=<span class=\"string\">\"btn-roll-container\"</span> <span class=\"attr\">catchtap</span>=<span class=\"string\">\"onRollTap\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">text</span> <span class=\"attr\">id</span>=<span class=\"string\">\"btn-roll\"</span> &gt;</span>摇<span class=\"tag\">&lt;/<span class=\"name\">text</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span>`</span><br></pre></td></tr></table></figure>\n<h3 id=\"dice-wxss\"><a href=\"#dice-wxss\" class=\"headerlink\" title=\"dice.wxss\"></a>dice.wxss</h3><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">page</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">background-color</span>: <span class=\"number\">#4F4F4F</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-id\">#header</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">    <span class=\"attribute\">flex-direction</span>: row;</span><br><span class=\"line\">    <span class=\"attribute\">justify-content</span>: space-between;</span><br><span class=\"line\">    <span class=\"attribute\">line-height</span>:<span class=\"number\">100</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">top</span>:<span class=\"number\">5%</span>;</span><br><span class=\"line\">    <span class=\"attribute\">left</span>: <span class=\"number\">50%</span>;</span><br><span class=\"line\">    <span class=\"attribute\">margin-left</span>: -<span class=\"number\">200</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">60</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">400</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>:<span class=\"number\">100</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">text-align</span>: center</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.btn</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>:<span class=\"number\">100</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">100</span>rpx;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.btn</span> <span class=\"selector-tag\">image</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>:<span class=\"number\">100</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">100</span>rpx;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.btn</span> <span class=\"selector-tag\">image</span><span class=\"selector-pseudo\">:active</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">position</span>: relative;</span><br><span class=\"line\">    <span class=\"attribute\">left</span>: <span class=\"number\">5</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">top</span>:<span class=\"number\">10</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>:<span class=\"number\">80</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">80</span>rpx;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-id\">#dice-count</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">100</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">100</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">font-family</span>: <span class=\"string\">\"microsoft yahei\"</span>;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>:white;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-id\">#dice-zone</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">750</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">700</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">top</span>:<span class=\"number\">10%</span>;</span><br><span class=\"line\">    <span class=\"attribute\">left</span>: <span class=\"number\">50%</span>;</span><br><span class=\"line\">    <span class=\"attribute\">margin-left</span>: -<span class=\"number\">375</span>rpx;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-id\">#btn-roll-container</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">200</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">100</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">margin-left</span>: <span class=\"number\">50%</span>;</span><br><span class=\"line\">    <span class=\"attribute\">bottom</span>: <span class=\"number\">10%</span>;</span><br><span class=\"line\">    <span class=\"attribute\">left</span>: -<span class=\"number\">100</span>rpx;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-id\">#btn-roll</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">200</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">100</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: block;</span><br><span class=\"line\">    <span class=\"attribute\">text-align</span>: center;</span><br><span class=\"line\">    <span class=\"attribute\">line-height</span>: <span class=\"number\">100</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid white;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>:white;</span><br><span class=\"line\">    <span class=\"attribute\">border-radius</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-id\">#btn-roll</span><span class=\"selector-pseudo\">:active</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">position</span>: relative;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">180</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">90</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>:white;</span><br><span class=\"line\">    <span class=\"attribute\">top</span>:<span class=\"number\">5</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">left</span>:<span class=\"number\">10</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">line-height</span>: <span class=\"number\">90</span>rpx;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"dice-js\"><a href=\"#dice-js\" class=\"headerlink\" title=\"dice.js\"></a>dice.js</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Page(&#123;</span><br><span class=\"line\">  data: &#123;</span><br><span class=\"line\">    diceCount: <span class=\"number\">1</span>,</span><br><span class=\"line\">    dicesData:[]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  onLoad: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">options</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// 页面初始化 options为页面跳转所带来的参数</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.dotsData = &#123;</span><br><span class=\"line\">      <span class=\"number\">1</span>: <span class=\"string\">\"5\"</span>,</span><br><span class=\"line\">      <span class=\"number\">2</span>: <span class=\"string\">\"28\"</span>,</span><br><span class=\"line\">      <span class=\"number\">3</span>: <span class=\"string\">\"357\"</span>,</span><br><span class=\"line\">      <span class=\"number\">4</span>: <span class=\"string\">\"1379\"</span>,</span><br><span class=\"line\">      <span class=\"number\">5</span>: <span class=\"string\">\"13579\"</span>,</span><br><span class=\"line\">      <span class=\"number\">6</span>: <span class=\"string\">\"134679\"</span></span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.timer = <span class=\"literal\">null</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.animation = wx.createAnimation(&#123;</span><br><span class=\"line\">      duration: <span class=\"number\">400</span>,</span><br><span class=\"line\">      timingFunction: <span class=\"string\">'linear'</span>,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  onReady: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// 页面渲染完成</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  onShow: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// 页面显示</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 产生色子点数</span></span><br><span class=\"line\">  createDotData: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> num = <span class=\"built_in\">Math</span>.ceil(<span class=\"built_in\">Math</span>.random() * <span class=\"number\">6</span>);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> diceData = <span class=\"keyword\">this</span>.dotsData[num];</span><br><span class=\"line\">    <span class=\"keyword\">var</span> dotsHidden = &#123;&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">1</span>; i &lt;= <span class=\"number\">9</span>; i++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (diceData.indexOf(i) &gt; <span class=\"number\">-1</span>) &#123;</span><br><span class=\"line\">        dotsHidden[i] = <span class=\"string\">\"black\"</span>;</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        dotsHidden[i] = <span class=\"string\">\"white\"</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> dotsHidden;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 产生色子动画</span></span><br><span class=\"line\">  createAnim: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">left, top</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// 色子移入屏幕</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.animation.top(top + <span class=\"string\">\"rpx\"</span>).left(left + <span class=\"string\">\"rpx\"</span>).rotate(<span class=\"built_in\">Math</span>.random()*<span class=\"number\">180</span>).step(&#123; <span class=\"attr\">duration</span>: <span class=\"number\">1000</span>, <span class=\"attr\">timingFunction</span>: <span class=\"string\">\"ease-out\"</span> &#125;);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.animation.export();</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 产生色子移动终点位置</span></span><br><span class=\"line\">  createDicesPos: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> dicesPos = [];</span><br><span class=\"line\">    <span class=\"comment\">// 色子位置判断</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">judgePos</span>(<span class=\"params\">l, t</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> j = <span class=\"number\">0</span>; j &lt; dicesPos.length; j++) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 判断新产生的色子位置是否与之前产生的色子位置重叠</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> ((dicesPos[j].left<span class=\"number\">-146</span> &lt; l &amp;&amp; l &lt; dicesPos[j].left + <span class=\"number\">146</span>) &amp;&amp; (dicesPos[j].top<span class=\"number\">-146</span> &lt; t &amp;&amp; t &lt; dicesPos[j].top + <span class=\"number\">146</span>)) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"keyword\">this</span>.data.diceCount; i++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> posData = &#123;&#125;,</span><br><span class=\"line\">          left = <span class=\"number\">0</span>,</span><br><span class=\"line\">          top = <span class=\"number\">0</span>;</span><br><span class=\"line\">      <span class=\"keyword\">do</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 随机产生色子的可能位置</span></span><br><span class=\"line\">        left = <span class=\"built_in\">Math</span>.round(<span class=\"built_in\">Math</span>.random() * <span class=\"number\">600</span>); <span class=\"comment\">// 0~600,根据色子区域和色子的大小计算得出</span></span><br><span class=\"line\">        top = <span class=\"built_in\">Math</span>.round(<span class=\"built_in\">Math</span>.random() * <span class=\"number\">550</span>); <span class=\"comment\">// 0~550,根据色子区域和色子的大小计算得出</span></span><br><span class=\"line\">      &#125; <span class=\"keyword\">while</span> (!judgePos(left,top));</span><br><span class=\"line\">      posData.left = left;</span><br><span class=\"line\">      posData.top = top;</span><br><span class=\"line\">      dicesPos.push(posData);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> dicesPos;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 设置色子数据</span></span><br><span class=\"line\">  setDicesData: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">diceCount</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> dicesData = [];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 色子动画数据</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> dicesPos = <span class=\"keyword\">this</span>.createDicesPos(); <span class=\"comment\">// 所有色子的位置数据</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; diceCount; i++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> diceData = &#123;&#125;;</span><br><span class=\"line\">      diceData.anim = <span class=\"keyword\">this</span>.createAnim(dicesPos[i].left, dicesPos[i].top);</span><br><span class=\"line\">      diceData.dots = <span class=\"keyword\">this</span>.createDotData();</span><br><span class=\"line\">      dicesData.push(diceData);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.setData(&#123; <span class=\"attr\">dicesData</span>: dicesData &#125;);</span><br><span class=\"line\">    </span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 摇色子</span></span><br><span class=\"line\">  onRollTap: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// 设置色子移出动画</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> newData = <span class=\"keyword\">this</span>.data.dicesData;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(newData.length &lt; <span class=\"keyword\">this</span>.data.diceCount)&#123;</span><br><span class=\"line\">      <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"keyword\">this</span>.data.diceCount;i++)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> data = &#123;&#125;;</span><br><span class=\"line\">        newData.push(data);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; newData.length; i++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.animation.left(<span class=\"string\">\"-233rpx\"</span>).top(<span class=\"string\">\"123rpx\"</span>).rotate(<span class=\"number\">-180</span>).step();</span><br><span class=\"line\">      newData[i].anim = <span class=\"keyword\">this</span>.animation.export();</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.setData(&#123; <span class=\"attr\">dicesData</span>: newData &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">var</span> that = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.timer = setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">      <span class=\"comment\">// 色子改变点数并移入屏幕</span></span><br><span class=\"line\">      that.setDicesData(that.data.diceCount);</span><br><span class=\"line\">    &#125;,<span class=\"number\">1400</span>)</span><br><span class=\"line\">    </span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 减少色子数量</span></span><br><span class=\"line\">  reduceDice: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.data.diceCount &gt; <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.setData(&#123;</span><br><span class=\"line\">        diceCount: <span class=\"keyword\">this</span>.data.diceCount - <span class=\"number\">1</span></span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 增加色子数量</span></span><br><span class=\"line\">  addDice: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.data.diceCount &lt; <span class=\"number\">9</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.setData(&#123;</span><br><span class=\"line\">        diceCount: <span class=\"keyword\">this</span>.data.diceCount + <span class=\"number\">1</span></span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"Project-Screenshot\"><a href=\"#Project-Screenshot\" class=\"headerlink\" title=\"Project Screenshot\"></a>Project Screenshot</h2><p><img src=\"https://mini.tysb7.cn/images/dice.png\" alt></p>\n<hr>\n<h2 id=\"Written-at-the-end\"><a href=\"#Written-at-the-end\" class=\"headerlink\" title=\"Written at the end\"></a>Written at the end</h2><p>If you have idea,please contact me.<br>My blog: tysb7.cn<br>email: <a href=\"mailto:&#x74;&#121;&#115;&#98;&#x37;&#x37;&#55;&#x40;&#x67;&#x6d;&#x61;&#105;&#x6c;&#x2e;&#x63;&#111;&#x6d;\" target=\"_blank\" rel=\"noopener\">&#x74;&#121;&#115;&#98;&#x37;&#x37;&#55;&#x40;&#x67;&#x6d;&#x61;&#105;&#x6c;&#x2e;&#x63;&#111;&#x6d;</a><br><a href=\"https://github.com/tysb7/WeChat-app-dice\" title=\"Click me to go to github\" target=\"_blank\" rel=\"noopener\">Click me to go to github</a></p>\n","more":"<p>This is my first project.A WeChat-app about dice.</p>\n<p><img src=\"https://mini.tysb7.cn/images/diceqrcode.jpg\" alt></p>\n<blockquote>\n<p>The project has been shelves.<br>The current version number is V1.0.0<br>You can search for 天地五行八卦骰子 in the WeChat.<br>You can also scan this QR code.</p>\n</blockquote>\n<hr>\n<h2 id=\"CODE\"><a href=\"#CODE\" class=\"headerlink\" title=\"CODE\"></a>CODE</h2><h3 id=\"dice-wxml\"><a href=\"#dice-wxml\" class=\"headerlink\" title=\"dice.wxml\"></a>dice.wxml</h3><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">import</span> <span class=\"attr\">src</span>=<span class=\"string\">\"dice/dice-template.wxml\"</span> /&gt;</span><span class=\"tag\">&lt;<span class=\"name\">view</span> <span class=\"attr\">id</span>=<span class=\"string\">\"header\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">view</span> <span class=\"attr\">class</span>=<span class=\"string\">\"btn\"</span> <span class=\"attr\">catchtap</span>=<span class=\"string\">\"reduceDice\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">image</span> <span class=\"attr\">src</span>=<span class=\"string\">\"/images/btn-left.png\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">image</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">text</span> <span class=\"attr\">id</span>=<span class=\"string\">\"dice-count\"</span>&gt;</span>&#123;&#123;diceCount&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">text</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">view</span> <span class=\"attr\">class</span>=<span class=\"string\">\"btn\"</span> <span class=\"attr\">catchtap</span>=<span class=\"string\">\"addDice\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">image</span> <span class=\"attr\">src</span>=<span class=\"string\">\"/images/btn-right.png\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">image</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">view</span> <span class=\"attr\">id</span>=<span class=\"string\">\"dice-zone\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">block</span> <span class=\"attr\">wx:for</span>=<span class=\"string\">\"&#123;&#123;dicesData&#125;&#125;\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">template</span> <span class=\"attr\">is</span>=<span class=\"string\">\"dice-template\"</span> <span class=\"attr\">data</span>=<span class=\"string\">\"&#123;&#123;...item&#125;&#125;\"</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">block</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">view</span> <span class=\"attr\">id</span>=<span class=\"string\">\"btn-roll-container\"</span> <span class=\"attr\">catchtap</span>=<span class=\"string\">\"onRollTap\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">text</span> <span class=\"attr\">id</span>=<span class=\"string\">\"btn-roll\"</span> &gt;</span>摇<span class=\"tag\">&lt;/<span class=\"name\">text</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span>`</span><br></pre></td></tr></table></figure>\n<h3 id=\"dice-wxss\"><a href=\"#dice-wxss\" class=\"headerlink\" title=\"dice.wxss\"></a>dice.wxss</h3><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">page</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">background-color</span>: <span class=\"number\">#4F4F4F</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-id\">#header</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">    <span class=\"attribute\">flex-direction</span>: row;</span><br><span class=\"line\">    <span class=\"attribute\">justify-content</span>: space-between;</span><br><span class=\"line\">    <span class=\"attribute\">line-height</span>:<span class=\"number\">100</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">top</span>:<span class=\"number\">5%</span>;</span><br><span class=\"line\">    <span class=\"attribute\">left</span>: <span class=\"number\">50%</span>;</span><br><span class=\"line\">    <span class=\"attribute\">margin-left</span>: -<span class=\"number\">200</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">60</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">400</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>:<span class=\"number\">100</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">text-align</span>: center</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.btn</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>:<span class=\"number\">100</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">100</span>rpx;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.btn</span> <span class=\"selector-tag\">image</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>:<span class=\"number\">100</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">100</span>rpx;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.btn</span> <span class=\"selector-tag\">image</span><span class=\"selector-pseudo\">:active</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">position</span>: relative;</span><br><span class=\"line\">    <span class=\"attribute\">left</span>: <span class=\"number\">5</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">top</span>:<span class=\"number\">10</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>:<span class=\"number\">80</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">80</span>rpx;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-id\">#dice-count</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">100</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">100</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">font-family</span>: <span class=\"string\">\"microsoft yahei\"</span>;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>:white;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-id\">#dice-zone</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">750</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">700</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">top</span>:<span class=\"number\">10%</span>;</span><br><span class=\"line\">    <span class=\"attribute\">left</span>: <span class=\"number\">50%</span>;</span><br><span class=\"line\">    <span class=\"attribute\">margin-left</span>: -<span class=\"number\">375</span>rpx;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-id\">#btn-roll-container</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">200</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">100</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">margin-left</span>: <span class=\"number\">50%</span>;</span><br><span class=\"line\">    <span class=\"attribute\">bottom</span>: <span class=\"number\">10%</span>;</span><br><span class=\"line\">    <span class=\"attribute\">left</span>: -<span class=\"number\">100</span>rpx;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-id\">#btn-roll</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">200</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">100</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: block;</span><br><span class=\"line\">    <span class=\"attribute\">text-align</span>: center;</span><br><span class=\"line\">    <span class=\"attribute\">line-height</span>: <span class=\"number\">100</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid white;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>:white;</span><br><span class=\"line\">    <span class=\"attribute\">border-radius</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-id\">#btn-roll</span><span class=\"selector-pseudo\">:active</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">position</span>: relative;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">180</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">90</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>:white;</span><br><span class=\"line\">    <span class=\"attribute\">top</span>:<span class=\"number\">5</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">left</span>:<span class=\"number\">10</span>rpx;</span><br><span class=\"line\">    <span class=\"attribute\">line-height</span>: <span class=\"number\">90</span>rpx;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"dice-js\"><a href=\"#dice-js\" class=\"headerlink\" title=\"dice.js\"></a>dice.js</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Page(&#123;</span><br><span class=\"line\">  data: &#123;</span><br><span class=\"line\">    diceCount: <span class=\"number\">1</span>,</span><br><span class=\"line\">    dicesData:[]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  onLoad: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">options</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// 页面初始化 options为页面跳转所带来的参数</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.dotsData = &#123;</span><br><span class=\"line\">      <span class=\"number\">1</span>: <span class=\"string\">\"5\"</span>,</span><br><span class=\"line\">      <span class=\"number\">2</span>: <span class=\"string\">\"28\"</span>,</span><br><span class=\"line\">      <span class=\"number\">3</span>: <span class=\"string\">\"357\"</span>,</span><br><span class=\"line\">      <span class=\"number\">4</span>: <span class=\"string\">\"1379\"</span>,</span><br><span class=\"line\">      <span class=\"number\">5</span>: <span class=\"string\">\"13579\"</span>,</span><br><span class=\"line\">      <span class=\"number\">6</span>: <span class=\"string\">\"134679\"</span></span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.timer = <span class=\"literal\">null</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.animation = wx.createAnimation(&#123;</span><br><span class=\"line\">      duration: <span class=\"number\">400</span>,</span><br><span class=\"line\">      timingFunction: <span class=\"string\">'linear'</span>,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  onReady: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// 页面渲染完成</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  onShow: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// 页面显示</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 产生色子点数</span></span><br><span class=\"line\">  createDotData: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> num = <span class=\"built_in\">Math</span>.ceil(<span class=\"built_in\">Math</span>.random() * <span class=\"number\">6</span>);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> diceData = <span class=\"keyword\">this</span>.dotsData[num];</span><br><span class=\"line\">    <span class=\"keyword\">var</span> dotsHidden = &#123;&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">1</span>; i &lt;= <span class=\"number\">9</span>; i++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (diceData.indexOf(i) &gt; <span class=\"number\">-1</span>) &#123;</span><br><span class=\"line\">        dotsHidden[i] = <span class=\"string\">\"black\"</span>;</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        dotsHidden[i] = <span class=\"string\">\"white\"</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> dotsHidden;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 产生色子动画</span></span><br><span class=\"line\">  createAnim: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">left, top</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// 色子移入屏幕</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.animation.top(top + <span class=\"string\">\"rpx\"</span>).left(left + <span class=\"string\">\"rpx\"</span>).rotate(<span class=\"built_in\">Math</span>.random()*<span class=\"number\">180</span>).step(&#123; <span class=\"attr\">duration</span>: <span class=\"number\">1000</span>, <span class=\"attr\">timingFunction</span>: <span class=\"string\">\"ease-out\"</span> &#125;);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.animation.export();</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 产生色子移动终点位置</span></span><br><span class=\"line\">  createDicesPos: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> dicesPos = [];</span><br><span class=\"line\">    <span class=\"comment\">// 色子位置判断</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">judgePos</span>(<span class=\"params\">l, t</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> j = <span class=\"number\">0</span>; j &lt; dicesPos.length; j++) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 判断新产生的色子位置是否与之前产生的色子位置重叠</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> ((dicesPos[j].left<span class=\"number\">-146</span> &lt; l &amp;&amp; l &lt; dicesPos[j].left + <span class=\"number\">146</span>) &amp;&amp; (dicesPos[j].top<span class=\"number\">-146</span> &lt; t &amp;&amp; t &lt; dicesPos[j].top + <span class=\"number\">146</span>)) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"keyword\">this</span>.data.diceCount; i++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> posData = &#123;&#125;,</span><br><span class=\"line\">          left = <span class=\"number\">0</span>,</span><br><span class=\"line\">          top = <span class=\"number\">0</span>;</span><br><span class=\"line\">      <span class=\"keyword\">do</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 随机产生色子的可能位置</span></span><br><span class=\"line\">        left = <span class=\"built_in\">Math</span>.round(<span class=\"built_in\">Math</span>.random() * <span class=\"number\">600</span>); <span class=\"comment\">// 0~600,根据色子区域和色子的大小计算得出</span></span><br><span class=\"line\">        top = <span class=\"built_in\">Math</span>.round(<span class=\"built_in\">Math</span>.random() * <span class=\"number\">550</span>); <span class=\"comment\">// 0~550,根据色子区域和色子的大小计算得出</span></span><br><span class=\"line\">      &#125; <span class=\"keyword\">while</span> (!judgePos(left,top));</span><br><span class=\"line\">      posData.left = left;</span><br><span class=\"line\">      posData.top = top;</span><br><span class=\"line\">      dicesPos.push(posData);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> dicesPos;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 设置色子数据</span></span><br><span class=\"line\">  setDicesData: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">diceCount</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> dicesData = [];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 色子动画数据</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> dicesPos = <span class=\"keyword\">this</span>.createDicesPos(); <span class=\"comment\">// 所有色子的位置数据</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; diceCount; i++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> diceData = &#123;&#125;;</span><br><span class=\"line\">      diceData.anim = <span class=\"keyword\">this</span>.createAnim(dicesPos[i].left, dicesPos[i].top);</span><br><span class=\"line\">      diceData.dots = <span class=\"keyword\">this</span>.createDotData();</span><br><span class=\"line\">      dicesData.push(diceData);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.setData(&#123; <span class=\"attr\">dicesData</span>: dicesData &#125;);</span><br><span class=\"line\">    </span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 摇色子</span></span><br><span class=\"line\">  onRollTap: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// 设置色子移出动画</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> newData = <span class=\"keyword\">this</span>.data.dicesData;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(newData.length &lt; <span class=\"keyword\">this</span>.data.diceCount)&#123;</span><br><span class=\"line\">      <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"keyword\">this</span>.data.diceCount;i++)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> data = &#123;&#125;;</span><br><span class=\"line\">        newData.push(data);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; newData.length; i++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.animation.left(<span class=\"string\">\"-233rpx\"</span>).top(<span class=\"string\">\"123rpx\"</span>).rotate(<span class=\"number\">-180</span>).step();</span><br><span class=\"line\">      newData[i].anim = <span class=\"keyword\">this</span>.animation.export();</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.setData(&#123; <span class=\"attr\">dicesData</span>: newData &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">var</span> that = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.timer = setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">      <span class=\"comment\">// 色子改变点数并移入屏幕</span></span><br><span class=\"line\">      that.setDicesData(that.data.diceCount);</span><br><span class=\"line\">    &#125;,<span class=\"number\">1400</span>)</span><br><span class=\"line\">    </span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 减少色子数量</span></span><br><span class=\"line\">  reduceDice: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.data.diceCount &gt; <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.setData(&#123;</span><br><span class=\"line\">        diceCount: <span class=\"keyword\">this</span>.data.diceCount - <span class=\"number\">1</span></span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 增加色子数量</span></span><br><span class=\"line\">  addDice: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.data.diceCount &lt; <span class=\"number\">9</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.setData(&#123;</span><br><span class=\"line\">        diceCount: <span class=\"keyword\">this</span>.data.diceCount + <span class=\"number\">1</span></span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"Project-Screenshot\"><a href=\"#Project-Screenshot\" class=\"headerlink\" title=\"Project Screenshot\"></a>Project Screenshot</h2><p><img src=\"https://mini.tysb7.cn/images/dice.png\" alt></p>\n<hr>\n<h2 id=\"Written-at-the-end\"><a href=\"#Written-at-the-end\" class=\"headerlink\" title=\"Written at the end\"></a>Written at the end</h2><p>If you have idea,please contact me.<br>My blog: tysb7.cn<br>email: <a href=\"mailto:&#x74;&#121;&#115;&#98;&#x37;&#x37;&#55;&#x40;&#x67;&#x6d;&#x61;&#105;&#x6c;&#x2e;&#x63;&#111;&#x6d;\" target=\"_blank\" rel=\"noopener\">&#x74;&#121;&#115;&#98;&#x37;&#x37;&#55;&#x40;&#x67;&#x6d;&#x61;&#105;&#x6c;&#x2e;&#x63;&#111;&#x6d;</a><br><a href=\"https://github.com/tysb7/WeChat-app-dice\" title=\"Click me to go to github\" target=\"_blank\" rel=\"noopener\">Click me to go to github</a></p>\n","categories":[],"tags":[]}